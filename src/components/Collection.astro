---
import ProductCarousel from './ProductCarousel.astro'
import { cn } from '@/utils/cn'
import type { ProductInfo, CarouselItem } from './ProductCarousel.astro'
// Import style images
import style01 from '@/assets/images/img-style-01.jpg'
import style02 from '@/assets/images/img-style-02.jpg'
import style03 from '@/assets/images/img-style-03.jpg'
import style04 from '@/assets/images/img-style-04.jpg'
import style05 from '@/assets/images/img-style-05.jpg'
import style06 from '@/assets/images/img-style-06.jpg'
import placeholderImage from '@/assets/images/main-kv.jpg'

interface Props {
  class?: string
}

const { class: className = '' } = Astro.props

// Create carousel data for each row
const productInfos: ProductInfo[] = [
  {
    headline: 'UNISEX',
    modelNumber: 'NYM82510',
    title: 'CR Move Insulation Jacket',
    copy: '抱っこ対応のユニセックスモデルの中わたジャケット',
    description:
      'ベビーカバー（ダッカー）をフロントに装着することで、子どもを抱いた上から着用することができるジャケット。ベビーカバーは単体でも使用でき、内側は子どもの肌に心地よいフリース素材仕様。子どもの成長後はダッカーを外して単体でのジャケット着用が可能。3色展開。',
    price: '¥44,000 (Tax incl.)',
    link: 'https://www.goldwin.co.jp/tnf/ec/pro/disp/2/NYM82510',
  },
  {
    headline: 'WOMENS',
    modelNumber: 'NYM82510',
    title: 'Maternity Insulation Jacket',
    copy: '身幅の調整が可能な、保温性を備えた中綿ロングコート',
    description:
      'ゆとりのあるシルエットとドットボタンでの調整で、お腹の大きくなる妊娠中から、子どもの成長後まで長期間の着用が可能。産後は小さな子供を抱っこした際に上から着用でき、子供の顔を出すことを想定して、襟元はVネックにも変化可能な2WAY仕様。2色展開。',
    price: '¥41,800 (Tax incl.)',
    link: 'https://www.goldwin.co.jp/tnf/ec/pro/disp/2/NYM82510',
  },
  {
    headline: 'UNISEX',
    modelNumber: 'NPM62510',
    title: 'CR Storage Jacket',
    copy: '手ぶらでのお出かけを叶える、抱っこ対応・収納力に優れるジャケット',
    description:
      '「極力バッグは持ちたくない」というパパの実際の声から生まれた、10個のポケットを備えるジャケット。ベビーカバー（ダッカー）をフロントに装着することで抱っこに対応。カバーを外せば収納力のある防水ジャケットとして単体で着用ができる。表地にはGORE-TEXを使用。2色展開。',
    price: '¥66,000 (Tax incl.)',
    link: 'https://www.goldwin.co.jp/tnf/ec/pro/disp/2/NPM62510',
  },
  {
    headline: 'WOMENS',
    modelNumber: 'NDM92501',
    title: 'Maternity Down Coat',
    copy: '妊娠中も産後もベビーと一緒に着用できるダウンコート',
    description:
      '防風性・はっ水性に優れた柔らかな手触りのGORE-TEX WINDSTOPPER®️の内側に、光電子®️ダウンをたっぷり封入した保温性に優れたダウンジャケット。お腹の大きくなる妊娠中から、子どもの成長後まで長期間の着用が可能。ベビーキャリアカバーを連結すれば子どもを抱っこしたまま着用でき、単体でもベビーカーや抱っこひもに装着できる。2色展開。',
    price: '¥93,500 (Tax incl.)',
    link: 'https://www.goldwin.co.jp/tnf/ec/pro/disp/2/NDM92501',
  },
  {
    headline: 'UNISEX',
    modelNumber: 'NTM62510',
    title: 'CR Sweat Crew',
    copy: '抱っこひも使用時にも着用しやすい、食品防汚に対応したスウェット',
    description:
      '袖と背面に配したポケットは抱っこひも使用時にも使いやすい配置。背面ポケットには左右どちらからでもアプローチでき、両脇ファスナーを開くことにより、抱っこひものヒップベルトの干渉が少なく使用できる。3色展開。',
    price: '¥17,600 (Tax incl.)',
    link: 'https://www.goldwin.co.jp/tnf/ec/pro/disp/2/NTM62510',
  },
]

// Create items for carousels using style images
const createCarouselItems = (startIndex: number): CarouselItem[] => {
  const images = [style01, style02, style03, style04, style05, style06]
  return Array.from({ length: 7 }, (_, i) => ({
    id: `item-${startIndex}-${i}`,
    image: images[i % images.length] || placeholderImage,
    alt: `THE NORTH FACE MATERNITY+ Style ${(i % images.length) + 1}`,
  }))
}

const carouselRows = productInfos.map((info, index) => ({
  id: `carousel-${index + 1}`,
  productInfo: info,
  items: createCarouselItems(index),
}))
---

<section class={cn('py-16 lg:py-20 overflow-hidden', className)}>
  <div class="container mx-auto mb-12 px-4 md:mb-16">
    <!-- Section Title -->
    <h2
      class="font-display text-center text-3xl font-medium md:text-4xl lg:text-[3.819vw]"
    >
      <span class="text-brown">MATERNITY+</span>
      <br class="md:hidden lg:block" />
      <span class="text-tape-navy-dark">2025FW COLLECTION</span>
    </h2>
  </div>

  <!-- Carousel Rows -->
  <div class="space-y-12 md:space-y-16">
    {
      carouselRows.map((row) => (
        <div class="relative px-0">
          <ProductCarousel {...row} />
        </div>
      ))
    }
  </div>
</section>
