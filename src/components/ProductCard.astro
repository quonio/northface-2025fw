---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

export interface Props {
  image: ImageMetadata;
  title: string;
  badge?: string;
  description?: string;
  colors?: string[];
  sizes?: string[];
  price?: string;
  id: string;
}

const {
  image,
  title,
  badge,
  description,
  colors = [],
  sizes = [],
  price,
  id
} = Astro.props;
---

<article class="product-card bg-white rounded-lg overflow-hidden" data-product-id={id}>
  <div class="relative aspect-[3/4]">
    {badge && (
      <span class="absolute top-2 left-2 z-10 bg-red-500 text-white text-xs px-2 py-1 rounded">
        {badge}
      </span>
    )}
    <Image
      src={image}
      alt={title}
      widths={[300, 400, 500]}
      sizes="(max-width: 640px) 300px, 400px"
      loading="lazy"
      class="h-full w-full object-cover"
    />
  </div>
  
  <div class="p-4">
    <h3 class="font-sans text-sm font-medium text-navy mb-2 line-clamp-2">
      {title}
    </h3>
    
    {description && (
      <p class="text-xs text-muted mb-3 line-clamp-2">
        {description}
      </p>
    )}
    
    {colors.length > 0 && (
      <div class="flex gap-1 mb-3">
        {colors.map((color) => (
          <span
            class="w-5 h-5 rounded-full border border-gray-300"
            style={`background-color: ${color}`}
            aria-label={`Color: ${color}`}
          />
        ))}
      </div>
    )}
    
    {sizes.length > 0 && (
      <div class="flex gap-1 mb-3">
        {sizes.map((size) => (
          <span class="text-xs px-2 py-1 border border-gray-300 rounded">
            {size}
          </span>
        ))}
      </div>
    )}
    
    {price && (
      <p class="text-sm font-medium text-navy">
        {price}
      </p>
    )}
  </div>
</article>

<style>
  .product-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }
</style>